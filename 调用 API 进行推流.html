<!DOCTYPE html>
<!-- saved from url=(0076)https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>
    调用 API 进行推流
  </title>
  <link rel="shortcut icon" href="https://agora-web-cdn.oss-cn-beijing.aliyuncs.com/dpv3/favicon.ico">
<link rel="apple-touch-icon" href="https://docs-preview.agoralab.co/apple-touch-icon.png">

<meta name="google" value="notranslate">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1,user-scalable=0">

<script async="" src="./调用 API 进行推流_files/gtm.js.下载"></script><script async="" src="./调用 API 进行推流_files/analytics.js.下载"></script><script src="./调用 API 进行推流_files/hm.js.下载"></script><script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?71179bbad7c652f8289d970d29f36014";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();

  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-76402370-1', 'auto', {
    'allowLinker': true
  });
  ga('require', 'linker');
  ga('linker:autoLink', ['www.agora.io', 'console.agora.io', 'dashboard.agora.io']);
  ga('send', 'pageview');
</script>
<!-- Google Tag Manager -->
<script>(function (w, d, s, l, i) {
    w[l] = w[l] || []; w[l].push({
      'gtm.start':
        new Date().getTime(), event: 'gtm.js'
    }); var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
        'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);w['gtag'] = function() {
          w[l].push(arguments)
        };
  })(window, document, 'script', 'dataLayer', 'GTM-TKTWGML');</script>
<!-- End Google Tag Manager -->

<link rel="stylesheet" href="./调用 API 进行推流_files/docsearch.min.css">
<script type="text/javascript" src="./调用 API 进行推流_files/docsearch.min.js.下载"></script>
<link href="./调用 API 进行推流_files/1.74b13ede69b54aa437d8.css" rel="stylesheet"><link href="./调用 API 进行推流_files/docs.6427a3e27891beb74b7f.css" rel="stylesheet"><style id="tsbrowser_video_independent_player_style" type="text/css">
      [tsbrowser_force_max_size] {
        width: 100% !important;
        height: 100% !important;
        left: 0px !important;
        top: 0px !important;
        margin: 0px !important;
        padding: 0px !important;
        transform: none !important;
      }
      [tsbrowser_force_fixed] {
        position: fixed !important;
        z-index: 9999 !important;
        background: black !important;
      }
      [tsbrowser_force_hidden] {
        opacity: 0 !important;
        z-index: 0 !important;
      }
      [tsbrowser_hide_scrollbar] {
        overflow: hidden !important;
      }
      [tsbrowser_display_none] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
      }
      [tsbrowser_force_show] {
        display: black !important;
        visibility: visible !important;
        opacity: 0;
      }</style></head>

<body>
  <!--[if lt IE 10]>
  <p class="browsehappy">您正在使用 <strong>旧浏览器</strong> . 为了更好的体验，请 <a href="http://browsehappy.com/">更新</a> 您的浏览器.</p>
<![endif]-->
  <nav class="navbar navbar-default" id="navbar">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-toggle sidebar-toggle" href="javascript:;">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="navbar-brand" href="https://docs-preview.agoralab.co/">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAMAAADwSaEZAAACAVBMVEUAAAD///9///9Vqv9Av/8zzP8qqv8ktv8gn/8as/8Xov8Vqv8SpP8Qn/8Ppf8Oqv8Nof8Mov8Ln/8Ko/8Jof8Snv8Qpf8Qn/8Pov8Pnf8PoP8Oo/8Nof8No/8Nn/8Mnv8MoP8Mov8Ln/8Lof8Lnf8Ln/8Kov8Jof8Nof8Nnv8NoP8Nnf8MoP8Mn/8Lnf8Ln/8LoP8Knf8Kn/8KoP8Knv8Kn/8KoP8Kn/8Jnf8Jnv8Jn/8Mnf8Mnv8Ln/8LoP8Lnv8Lnf8Lnv8Kn/8Kn/8Knf8Knv8Kn/8Knv8Knf8Jn/8Jnv8Ln/8Lnf8Lnv8Ln/8Lnv8Lnv8Kn/8Knv8Knf8Kn/8Knv0Kn/0Knv0Knf0Knv0Jn/0Jnf0Jnv0Ln/0Lnv0Knf0Kn/0Knf0Knv0Knv0Knf0Knv0Jnv0Jnf0Jnv0Jnv0Jnv0Knv4Knf4Knv4Knf4Knv4Knf4Knv4Knf4Knv4Knv4Knf4Knv4Knv4Knv4Jnf4Jnv4Jnf4Jnv4Jnv4Jnv4Jnv4Jnf4Knf4Knv4Knf4Knf4Knv4Knv4Knf4Knv4Knv4Knf4Jnf4Jnv4Jnv4Jnv4Jnv4Jnv4Jnv4Knf4Knf4Knv4Knf4Knv4Knv4Knf4Knf4Knv4Knv4Knf4Knv4Jnf4Jnf4Jnv4Jnf4Jnv4Jnv4Jnv4Jnf4Jnf4Jnv4Jnf4Jnv4Jnf2YbaeiAAAAqnRSTlMAAQIDBAUGBwgKCwwOEBESExYYGRsdHyAhIiMkJicoKissLS4vMDQ2OTo7PD5AREVGSUpLTE1OUFFUVVZXWltcXmFiZWZnaGlrbXFyc3R1dnl6fH1/gYKDhYaHiouPkJKUl5iZmqCjpKWmqKusra+wsbK0tba3uLq7vL2+v8LDxcbJyszOz9DR0tTW2Nrc3d/h4uPm5+jp6uvt7u/w8fLz9PX29/n6+/z9/pdzH7wAAAKgSURBVFjD7djpV1JBGMDh98o1RExoIaLVFqLNyiXLFrPSstwqbLPFsszQSisrjbJSIlITIUtLMVsQmr+yL3ma4d4789KZ05d4P8rvPIdzz51FADKTmcz8mzFvqjh3w3ff1+I9XrJQ+7HqafDl4STXqb7v5M8kA1fKFtCfL7o4RQixIyS1sp9oZ7xp8XygNH4jBIWZqsNEf37ccgEAgK3n9x+E2JYgMZ6v9SaA3AGCw5QLPwl3Bt3qQ4LDrF1ENHNPCQ5zhkhaw8M8k0Qa5vhApGGWAJGGKZ1EHtZE5GEbE5o01nFo8zKzbd2us8H0MOVlajhcTq3s5a1zaWAHUrLpapUNVj9CY8obthpZo03OY7FSNurP14sOJnHYPaYZNXgWdSjMHqeTmQKj16cNgx1hkkbDRZI3gcDa6SKSY7x8TyCw93RRxdlXsqNCbAmz+dl4O95VIVZIB37uVlwoxKpwjx8AwDQrwk7TwX7+iTMswprpYBsf84uwFjpYxcc6RNglOvDwsccizEsHe/hYSIQx73UNH/skworooJNrbRC+Zy46+GLmYV4hljVDF7t52GvxQn9AF684Vili16hlkn3Gi+ktAlvJJOF8I6wWdQa8YJpeVd/amUBhR9nouqIXFUzhTqeccba6m6ttimPYE70+JQuuT/0X40wSfT2wjKV0yTYHfZxXhNO4a0jFYK+mjPfWOBUAAMuOa9E0L3t39Op4ZGBo+i9ujtaQxGsoOCclYrA9LhGDw0mJGJTEJGKw9p1YmMBiYPMLqNgx+wgWA7Vhlmd1LQVwfcRiAI72hBE1Wg4AAO4xNAaw4qbut+sry5p/GN14DMBa2cN6icHLzLW56DkeA4DsrSdbnw1FPkcDT243F2t/DnHXdUfRWGb+4/kFZM0/2fkeWwoAAAAASUVORK5CYII=" alt="">
        <span>开发者中心</span>
      </a>
    </div>
    <div class="navbar-collapse collapse mobile" id="navbar-collapse" aria-expanded="false">
      <ul class="nav navbar-nav navbar-right login-nav">
        <li class="without-login">
          <a href="https://console.agora.io/cn/signup">注册/登录</a>
        </li>
        <li class="with-login hidden dropdown">
          <a href="javascript:;" type="button" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span id="username"></span>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li><a href="https://console.agora.io/">我的主页</a></li>
            <li><a href="https://console.agora.io/signout">退出</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right main-nav" style="width: 476.25px; max-width: 100%;">
        <li>
          <a href="https://docs-preview.agoralab.co/cn/faq">FAQ</a>
        </li>
        <li>
          <a href="https://docs.agora.io/cn/Agora%20Platform/community" target="_blank">开发者社区</a>
        </li>
        <li>
          <a href="https://docs-preview.agoralab.co/cn/Agora%20Platform/downloads">下载</a>
        </li>
        <li>
          <a href="https://docs-preview.agoralab.co/cn/Agora%20Platform/sampleapps">场景方案 Demo</a>
        </li>
        <li>
          <a href="https://agora-ticket.agora.io/">支持</a>
        </li>
        <li class="dropdown language-switch">
          <a href="javascript:;" type="button" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span id="language" class="mr-1">中文</span>
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li class="" value="en"><a href="javascript:;">English</a></li>
            <li class="active" value="cn"><a href="javascript:;">中文</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="search-nav search-btn">
          <form action="https://docs-preview.agoralab.co/cn/search" class="search-form">
            <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="text" class="form-control search-box ds-hint" autocomplete="off" readonly="" aria-hidden="true" spellcheck="false" tabindex="-1" style="position: absolute; top: 0px; left: 0px; border-color: transparent; box-shadow: none; opacity: 1; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(255, 255, 255, 0.15);"><input type="text" name="q" class="form-control search-box ds-input" placeholder="搜索关键词" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="search input" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top; background-color: transparent;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: &quot;Helvetica Neue&quot;, Arial, &quot;pingfang SC&quot;, &quot;Microsoft YaHei&quot;; font-size: 14px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="ds-dataset-1"></div></span></span>
            <input type="hidden" name="platform" value="Linux Java">
            <input type="hidden" name="product" value="scrs">
            <img class="icon search" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAFPFKMkAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAARKADAAQAAAABAAAARAAAAADjEeGFAAAE1klEQVR4Ae2bX4hVVRTGvVb4YI4kgUzFUIFYRGkPFtbAjEHiQIQP9tofRISQIH0XeleQ3pTCp3qIQqIefFOKxplxxhR8UQmjmhwVKS3IMr3+vjt7X/bd99xz9rnnnPFeZy9Y7H/f+tY63zlzz99ZsqQSqxvrSK51u0j3EdtvaV1Qy4I/APiw5vIENNP7ZD0xZkue1NbIMgsC81YqCMDtNoClpp3EV7YB3AkAA3J37r7ss5ESfs7fOOayd4QNSgOnrdn4RtsJyPxMCzBkQNB7IpQJT6P9KSu+T0UippBCIqYKBaS+Zy/myqNgP4CpM/ioP584BvgYPpK0yHwbeRJOR+Vs4gKTrF3vtLbUW5j2xu4w/HDvVHaneWXxK9HcfgL+VsdaGoHFJLYE/qNg7KAA891AcRMZzWSpRGmJ4lpUoIcU4LgfxL/CZ/FL+BF8aEFKJNHbuLW2n04WnreLtB9VUpRNEEoO/qZiQvFBOPi0C3KTKgb7MyhJCAiyOTGGYF0MIb92E+dytPQhe1qE2NqWhYzBfEj9QAYs3zKkLxviqaxIcLsM9lAWtut1EoyZJLbRn+55OzDtYW+cfovTdTWBgRRjL7ltXeHXIoE5csH8gnIFR3BUICoQFYgKLFoFOH/swKfxf037wYKKQdJv8TT7rvKCyH7LVDCelIy1r22FSeulzJHgqknyUhohmCGD+y8N19UaxMOG/J0QArDrDX53CD4YA+kdEQcHAAT+R96YTH4RYrmuxsG/0Yiq12uZCUIBhnA4FG9xJm6dHYe0SY/A/Lj//YnA8apAXAMWUshYHkLUWGPwp/LEpWKNxHkP1h8Ul0qcdxG+baaYV0NiwT5o8N+H4HNhINY5RZa5z+dhJavhVmsT0CY+hGF+1MGoO+HGl9qHXPe61m7TOYXfsBOmHXfGlRazikTNE5xJeoG2eR6ivzDFhMhMMSdMkWqqU6bfi/k0ZAMqwzi76XhlSSJxVCAqEBWICkQFogJRgahAVCAqUEQBLtv1BPA43ngARxtiJwG9WSRv0djyHrRRCRszQvMl/qhX2EXG3+B6UHwJv4rr0+cn8BfwrfhzuGs3GWyv1Wqfu5N90ZcQuH06Trfx9dq73RRP7Gv4ZZE4trMbrnsSQ9Huuwp9xrehjELgWY3/glv7mc6yMrgr46BA/UZYS3xvUjQ55PtsAtpreON/BIrylh5PYXqNZu2n0hM4hCT5xCai/cxZ6p0uhc04Rab/a0PBssmzwsmlrv+jXTBDCeEUZR+Gq8BnSqBMpSDHOSUytiUVXGAx5AVNJ/qzzoJ/ynSWincRQZcHTzlMvzv93uhS5Id2d9GerrIqL9eZKnMV4qbQHx1RvihE1iEY/tedHOrqQq53jQInnIJ/oz9YVrVwfexw6xbglbK4K+Wh0O1O4erqFdaz3SQl7gH8AO6bhL+336Dm3SAK3oPrJaNrugzXnt6EP+RzMqdvTN7Hj+Eh1pfCLGfL9uJ/hWyhh5lirJtE3Szqo2D3BakLlTADvsBFx6Xe7aYVQ/E6Oh43rt8Z3c1ewy9yRztH29HMhh8FsDEBNMncZjhuJKzd31MSBnffYjNsWiVHTF8oigRRmKQ9lSLMlST8opkzwuiOWGc0PZKw33ctGg3ihkYFogJRgahAVKAPFbgLDV5BK/9/r44AAAAASUVORK5CYII=" alt="search">
            <img class="icon close hidden" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAFN++nkAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAPKADAAQAAAABAAAAPAAAAACoF8tmAAAECElEQVRoBe1bu24TQRT1A4GERIUEQkoBFV+ARIMEVCjQAyJUSLFT0PIVFEgUsR0h4SAUHl9AjeAb0hFXUFBbFHbMuau9y/VkXnc9G1OMJWtm5957zpw7j91ZJ61Wss/u7u6CwRaLRYfrSyU5OY3kSUaJtBQtI51OSxFrunB2LqFhTdJiaeVYOWPMdHhH34VCICaQy7dqN5miAMygCq2sRIGYQfnakYHBYDCjr81cjvmRzVa12QCiAhlBAvgC2xxglgSASdNF+2RnZ+eqaafrM7ZGaqPAdrtNm+qGy8e6y5bTcNLv9wu7K4knQG0aZQ5OBHCDLZBtUQDsnMucgXAGMN3+RE9qAcf7N+IPRfNS1bmW2YuIy6U5xwpzLl/yJ0L4z8tY5x5A9iBxCdLydUBDyHjRxBwgO9Dr9c7GKuR4LtXEFCgV0u7ImxyDxpQqYkkI8GIMZQZCc0B2KIrYRihBqK7tgJc4hnDVDpjxxTWtQ3yPrMZAI2UAsW8CbtmcM5AzkDOQOAN7e3uX60KOx+OLvljrMz0FYMvbnM1mv0aj0SMfgM2G2HfT6fT3cDi8YrNTm5MYtgvkMJ/PDzTkRIqbyxbFHh8fn6PS9vHenQDyECAfKLDb7T7e3t4u6jYgapOkuLyGc9cRtds+XmIKiCXXkBJukDiGXEsaTewjr0OqIraRY/Lc54kEu3dMKV5+olItA+SYi3YVKcX5lpPA/VfFk+RHXH3llk6n89w3e9nPLNXENKYAucVASPdrzTrnOBWxOZHwMF/satpNhsijx9gk5fTKMY/ZZFhxFLGLlEEkOWWhnAdstpZB4hApo2rJvcSxpHXIncRaUi25c1ZjrF6UYKrNgcaXZzvOz5+4Q7nMGcgZyBnIGcgZyBnIGVhnBpxPW6FO4WlsEz6fcXh5Fjqqh7Bi7fQCGy82xihvgPcOHqp+xsayn1rw/v7+JbxR+QHS8xVIu02/9TzFE94Bt6UshdDipYrA/oKjzD1xHayqBTMinRhQf4/O0A/bxQePs3NkfivViHuETkB4m89tJX1UUVswozchvAmh3N+VBTNQCuFNCuV+JhPMgHWEn4ZQ7l9ywQwcI/w0hXK/GhPMBC7hsH+H4OoVWek/QVlrM2K+UNm4YO6ATTjbUDYulLmcb1vYIUVJUxc4D1BWtzCJi9vZBl4D3pRtTdUbHeHAGn0Joa9kElLfx21Ja0RwQOjSGrVN9SaFJxWsEWpm/7SEJxG8itBY4fB7EvO23cQzr1cSnFKo2THXiK8qvJbgJoU2LVwtmH7lx/HwGzp2XXRugvrSZiRsSaqOER9hmvc0BGrBDE5/YYCRfotvr84xjXG0ZSn8Lg7/fezm1f+iaHGyf85AzkDOQM7A/5iBvxzpPw6SSAzWAAAAAElFTkSuQmCC" alt="close">
          </form>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <div class="container main-container">
    <div class="sidebar">
  <div class="product-select dropdown">
    <a href="javascript:;" type="button" class="dropdown-toggle dropdown-select" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="title">服务端推流</span>
      <span class="caret"></span>
    </a>
    <div class="dropdown-menu">
      <ul>
      
      <!-- <ul> -->
        <!-- <li class="level1"><a>产品</a></li> -->
        
        <!-- <li> -->
          <!-- <ul> -->
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Voice">语音通话</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Video">视频通话</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Interactive%20Broadcast">视频互动直播</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Audio%20Broadcast">音频互动直播</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Interactive%20Gaming">互动游戏</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/RTSA">实时码流加速</a></li>
            
          <!-- </ul> -->
        <!-- </li> -->
        
      <!-- </ul> -->
      
      <!-- <ul> -->
        <!-- <li class="level1"><a>插件</a></li> -->
        
        <!-- <li> -->
          <!-- <ul> -->
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/cloud-recording">云端录制</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Recording">本地服务端录制</a></li>
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Real-time-Messaging">实时消息</a></li>
            
          <!-- </ul> -->
        <!-- </li> -->
        
      <!-- </ul> -->
      
      <!-- <ul> -->
        <!-- <li class="level1"><a>Agora 平台</a></li> -->
        
        <!-- <li> -->
          <!-- <ul> -->
            
              <li class="leaf "><a href="https://docs-preview.agoralab.co/cn/Agora%20Platform">Agora 平台</a></li>
            
          <!-- </ul> -->
        <!-- </li> -->
        
      <!-- </ul> -->
      
      </ul>
    </div>
  </div>
  
  <div class="docs-tree">
    
    <ul>
      <li class="level1">
        <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_product?platform=Linux">
          <span>产品概述</span>
          
        </a>
        
      </li>
    </ul>
    
    <ul>
      <li class="level1">
        <a href="javascript:;">
          <span>快速开始</span>
          
          <span class="caret"></span>
          
        </a>
        
        <ul>
          
          <li class=" level2 ">
            <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_demo_java?platform=Linux%20Java" class="preventDefault" target="" data-toggle="popover" title="一分钟跑通 Demo">
              <span>一分钟跑通 Demo</span>
              
            </a>
            
          </li>
          
          <li class=" level2 ">
            <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_sdk_java?platform=Linux%20Java" class="preventDefault" target="" data-toggle="popover" title="下载并快速集成 SDK">
              <span>下载并快速集成 SDK</span>
              
            </a>
            
          </li>
          
          <li class="open level2 active">
            <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java" class="preventDefault" target="" data-toggle="popover" title="调用 API 进行推流">
              <span>调用 API 进行推流</span>
              
            </a>
            
          </li>
          
        </ul>
        
      </li>
    </ul>
    
    <ul>
      <li class="level1 open">
        <a href="javascript:;">
          <span>API 参考</span>
          
          <span class="caret"></span>
          
        </a>
        
        <ul>
          
          <li class=" level2 ">
            <a href="https://docs-preview.agoralab.co/cn/scrs/API%20Reference/streaming_java/0.4.0/index.html?transId=0.4.0" class="preventDefault" target="" data-toggle="popover" title="Linux Java">
              <span>Linux Java</span>
              
            </a>
            
          </li>
          
          <li class=" level2 ">
            <a href="https://docs-preview.agoralab.co/cn/scrs/API%20Reference/streaming_cpp/0.4.0/index.html?transId=0.4.0" class="preventDefault" target="" data-toggle="popover" title="Linux CPP">
              <span>Linux CPP</span>
              
            </a>
            
          </li>
          
          <li class=" level2 ">
            <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_rest?platform=All%20Platforms" class="preventDefault" target="" data-toggle="popover" title="服务端推流 RESTful API">
              <span>服务端推流 RESTful API</span>
              
            </a>
            
          </li>
          
        </ul>
        
      </li>
    </ul>
    
    <div class="hr"></div>
    <ul>
      <li class="level1">
        <a href="javascript:;">
          <span>相关链接</span>
          <span class="caret"></span>
        </a>
        <ul>
          <li class="level2">
            <a href="https://docs-preview.agoralab.co/cn/Agora%20Platform/console_overview">
              <span>控制台</span>
            </a>
          </li>
          <li class="level2">
            <a href="https://docs-preview.agoralab.co/cn/Agora%20Platform/aa_guide">
              <span>水晶球</span>
            </a>
          </li>
          <li class="level2">
            <a href="https://docs-preview.agoralab.co/cn/Agora%20Platform/dashboard_restful_communication">
              <span>Restful API (New)</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  
</div>
    <div class="docs-container">
  <div class="breadcrumb">
    <img class="home" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAFNQDtUAAAABGdBTUEAALGPC/xhBQAAAqFJREFUWAntVjtPG0EQxmcIkilQGoihyE+gsUiRiMYRHUoqi5pIthPZPQWFFSlKk8I0fil0aVAkKhRFoaAAQWWlIhRpoqQwAiEhiii2hC/fXG5W473bu8NxCIVPutvZeXwzuzM7eyMjQU82m7VZbhEBxo47OgKHSYxGoxGj8ZpPsVgcz+VyH8lslD7tdvsXjfQo8D/Tfr8qLjh6a9v2MwnEcStfULgvFSStlGKx2BEEB671AdFScYA0pUCmgaDVinQBZBOI6acKVA+EhMQzKrCBrnDMG8UKTrbcCa39m6Bd8iaGeJgTbNGHVCrVbjabX0y6aj+lAgwfYb4neUQj95f1en3Sw5cMlFoLlXRP8kx0PB5fqFarjiNPJIiCDtxjkzHx9dTouQuyNcrCQJyC0D0b0YaCaDuQz+cfonYOw7Q9dcIGqJcN0Cs8TyQSd8vl8gXP5egLAoATKE1LRaIty1qq1WrbOr8HhNq57OC6Ms1xfjZxfpalTIHQ+rvd7r4UBtBnKMAplisQZmAp6vZinhyxpDUs6VUPT076pcPOTiTcfw9Cp5dePN2gkAYSibwv2JnnzkTLJJ7jEPQPVhyOwx2IvAOePhDVEo33BaquDP0xtsHZeJNOp1czmcwV86KO1woEnW8Wzrfwzgc5QEBf8cfwpFKpHAfpSVmkQNAtn8NoHa9avQQx0W73WENPf23SYb4xkEKhMNPpdLag+ICV/2ZEUJ+xk0/R3r774XgCKZVKVqvVWsSdcIcMcAm9BMCcn3FUHoJ4B7z3Ll4nmUx+gp+eXusJRAdHWkJ/AHUbfe530Xl0dMb/mg/kthlE8H43ViRc5P0UtbOMY+rkGrU0gTn9OoWm289B34HA6TlOwK4ERZMD2+4rkFuTGrmgIX2rduA3OrTTJvcMVJ8AAAAASUVORK5CYII=" alt="">
    <a href="https://docs-preview.agoralab.co/" class="last">
      开发者中心
    </a>
    
    <span class="separate last">&gt;</span>
    
    
    <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_product?platform=Linux" class="last">服务端推流</a>
    
    <span class="separate last">&gt;</span>
    
    
    <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_demo_java?platform=Linux%20Java" class="last">快速开始</a>
    
    <span class="separate last">&gt;</span>
    
    
    <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java" class="last">调用 API 进行推流</a>
    
    
  </div>
  <div class="docs-content">
    <div class="docs-title">
      <h1>调用 API 进行推流</h1>
      
      <a href="https://github.com/AgoraIO/Documentation/tree/master/cn/scrs/scrs_api_java.md" target="_blank" class="icon-edit">
        <img width="22" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAFpg2qXAAAABGdBTUEAALGPC/xhBQAAAslJREFUWAntmb9rFEEUx3OiAX8HJUVIQNCIjYKojQhiLEQQIY2FYGVvLCLYCmKhdcA/QbCzE5sr/IVgo0QrFS38jT8holyifl5uZnk7N7O7d7O7iOzAy3vz3ne+73uPu2XuMjQUtf5016EUieRSCdl4kz2owgnozqTAwi8rSXa3KiEVkkcSRLUBrX54Nei2FmD8Jl1LYoqj2AsBJUknaNl9JqjVSnAWX6NH2upC7eQ1mDVpD/QIB7CC4lICUC9OCskCOMHGC0xAEgAcN22XXarobgxwB/6zW+vZA3rYk/QlAF4yzD7X9p1pct0JMLA3amhj0XOB7Lci1OFU3+ScXqcZnHj7IIT7HBK9XZVHmPqMWDAMd4k32L3xHT5bdnWcWv4W0htK2ldi/4Mun6pBNBP4pyfAe3sjdq5UkRDuwux6VAo5bMcso/Jvo8ghOqvIdLg4MDEsVzWTir/FkN5SRDp8GUP6VDOp+H4M6UdFpMNrMaQLmknFF2JIZyEawb4rQglPDkwqByFYMoST+Fcm3h9FaogN17I7yN8tZZBOQySKL2PF7rzRXfskSN2nURn8ZpHFK3eCrHpTaybQTKCZQJEJ8Ajaij2TZ5FZd/AjRc7WikHUAeyLEelzz0luq1WUrxkiTmEdn8JA7oqPp/IcYi4GBIXSPylMVy5MN6DhMHY9pCiQf09+j+apPKbhZuxBQFAoPU9hvHJxugEN5ecze5sLCXPzN0ms1TyVxzQ8jLl3WleYu58j4f2VZRDBK4scouEouAVMnpvDBc7IvW+Ga9xcAWz5EATfNmN7jB/D9mIfTE47+bpytHwFfTAi4LRWZOJ3+N3YBPYEe43t7IO2Gigi1mDJvyCI7ZJnZxuT72q1Xt8zmyHmOKOQ92yb92P+j+rVzC3FGhSM2PMgZ1Loajf3GMqJvBZZgtdzWKyu9QvBn+pq1vT5bybwF3G+YbQT3T0nAAAAAElFTkSuQmCC" alt="">
        <span>Edit</span>
      </a>
      
    </div>
    
    <div class="docs-tabs">
      <div class="btn-group" role="group" aria-label="...">
      
        <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java" type="button" class="btn btn-default active">Linux Java</a>
      
        <a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_cpp?platform=Linux%20CPP" type="button" class="btn btn-default ">Linux CPP</a>
      
      </div>
    </div>
    
    <div class="article-body cn theme-dark">
      <p>本文介绍如何在<a href="https://docs-preview.agoralab.co/cn/scrs/scrs_sdk_java">集成 Server-controlled Streaming SDK</a> 后调用 API 进行推流。</p>
<h2 id="api-调用时序" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#api-调用时序" class="active">API 调用时序<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#api-调用时序" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h2>
<p><img src="./调用 API 进行推流_files/1562904980840" alt=""></p>
<h2 id="实现方法" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#实现方法" class="">实现方法<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#实现方法" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h2>
<h3 id="创建实例" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#创建实例" class="">创建实例<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#创建实例" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h3>
<p>在使用 Server-controlled Streaming SDK 之前，需要调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a9cf56b90e659de06949bc1a556b4151f"><code>initialize</code> </a>方法创建一个 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0"><code>StreamingController</code></a> 实例。创建完成后，即可使用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0"><code>StreamingController</code></a> 类提供的方法实现服务端推流。<br>如果你不再需要该实例，可通过调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a1cfa206d30f9d782170f599c7ec88a33"><code>release</code></a>方法销毁实例，释放资源。</p>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="StreamingController streamingController = StreamingController.initialize(handler);
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">StreamingController streamingController = StreamingController.initialize(handler);</code></pre>
<blockquote>
<p>注意：<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a9cf56b90e659de06949bc1a556b4151f"><code>initialize</code> </a> 方法中需要传入一个继承于 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_streaming_event_handler.html?transId=0.4.0"><code>StreamingEventHandler</code></a> 类的 <code>handler</code> 参数作为回调对象，该回调对象可以反馈<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_streaming_event_handler.html?transId=0.4.0#a408c7fde5f1283e2ed83758e6f051d55"><code>onStreamStatus</code></a>、<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_streaming_event_handler.html?transId=0.4.0#a3278493b13dbe6a2893a67c06d82be92"><code>onDisconnectedWithTask</code></a>、<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_streaming_event_handler.html?transId=0.4.0#afd606f03a10ae31d081074562d4a38e4"><code>onReconnectedWithTask</code></a> 和 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_streaming_event_handler.html?transId=0.4.0#a56611263b60be3b96772292aed649bd6"><code>onTaskDestroyed</code></a> 等推流的状态回调信息。</p>
</blockquote>
<h3 id="推流操作" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#推流操作">推流操作<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#推流操作" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h3>
<p>Server-controlled Streaming SDK 提供的 API 的操作对象是 Task，Task 指一个频道中的一个推流任务，被 Task ID（<code>tid</code>）标识。一个频道可以有多个 Task， 每个 Task 都相互独立，有各自的<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_transcoding.html?transId=0.4.0">转码配置</a>和推流到 CDN 的 URL 地址。你可以调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ad3e874bd88409489b6b5b2d843a9e72e"><code>createTask</code></a>、<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a778a0cbf16d9d05ff8005f64fd7619d9"><code>destroyTask</code></a>、<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ae8e15a674c5506c0d5139b987d8d27e5"><code>queryTask</code></a>、<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a46f1e9264556d60f0fddb4987bb49e6a"><code>updateTaskTranscoding</code></a> 和 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a0da2eb422642b82f3348992f60d60648"><code>replaceTaskUrl</code></a> 等方法管理 Task。App 负责管理 Task 的生命周期，当一个 Task 不再需要时，App 需要显式销毁 Task，并根据回调结果判断是否销毁成功。</p>
<h4 id="创建推流-task"><strong>创建推流 Task</strong></h4>
<p>创建 <code>StreamingController</code> 实例后，可以调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ad3e874bd88409489b6b5b2d843a9e72e"><code>createTask</code></a> 创建一个推流任务。创建一个 Task 需要传入和推流相关的 <code>appId</code>、<code>cname</code>、<code>token</code>、<code>Transcoding</code>、<code>url</code>、<code>autoDestroyTime</code>、<code>customParams</code> 参数和一个继承 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 的回调类，该回调类用于监听 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ad3e874bd88409489b6b5b2d843a9e72e"><code>createTask</code></a> 方法执行的结果。成功调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ad3e874bd88409489b6b5b2d843a9e72e"><code>createTask</code></a> 后会返回一个标识这个推流任务的 <code>tid</code>。</p>
<blockquote>
<p>注意：<code>token</code> 为可选参数。如果你的 <code>appId</code> 开启了 <code>token</code>，则在创建 Task 时需要为 Task 生成一个 <a href="https://docs.agora.io/cn/Agora%20Platform/terms?platform=All%20Platforms#a-namekeya%E5%8A%A8%E6%80%81%E5%AF%86%E9%92%A5">Token</a>。生成 Token 时，参数 <code>uid</code> <strong>必须填 0</strong>，参数<code>expire_ts</code> 填 0 确保 Token 永不过期</p>
</blockquote>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="String tid = streamingController.createTask(appId,cname,token,Transcoding,url, autoDestroyTime, customParams ，new CommonCallbackImp())
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">String tid = streamingController.createTask(appId,cname,token,Transcoding,url, autoDestroyTime, customParams ，<span class="hljs-keyword">new</span> CommonCallbackImp())</code></pre>
<blockquote>
<p>注： <code>CommonCallbackImp</code> 继承于 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 类</p>
</blockquote>
<h4 id="查询推流状态"><strong>查询推流状态</strong></h4>
<p>调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ae8e15a674c5506c0d5139b987d8d27e5"><code>queryTask</code></a> 方法后，SDK 会通过 <code>tid</code> 查询指定的推流 Task 的<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_transcoding.html?transId=0.4.0">转码配置</a>和 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_streaming_event_handler.html?transId=0.4.0#a408c7fde5f1283e2ed83758e6f051d55">RTMP 流状态</a>。查询结束或超时后，SDK 会触发 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_query_callback.html?transId=0.4.0"><code>QueryCallback</code></a> 回调查询 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#ae8e15a674c5506c0d5139b987d8d27e5"><code>queryTask</code></a>  方法执行的结果。</p>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="Boolean state = streamingController. queryTask (appId,cname,tid , new QueryCallbackImp ());
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">Boolean state = streamingController. queryTask (appId,cname,tid , <span class="hljs-keyword">new</span> QueryCallbackImp ());</code></pre>
<blockquote>
<p>注：<code>QueryCallbackImp</code> 继承于 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_query_callback.html?transId=0.4.0"><code>QueryCallback</code></a> 类</p>
</blockquote>
<h4 id="更新-rtmp-流的转码配置"><strong>更新 RTMP 流的<a href="https://docs.agora.io/cn/Agora%20Platform/terms?platform=All%20Platforms&amp;_ga=2.249111431.1027528350.1562552160-1700503659.1558408312#%E8%BD%AC%E7%A0%81">转码</a>配置</strong></h4>
<p>调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a46f1e9264556d60f0fddb4987bb49e6a"><code>updateTaskTranscoding</code></a> 方法后，SDK 会尝试更新 <code>tid</code> 对应的 Task 的<a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_transcoding.html?transId=0.4.0">转码配置</a>。更新结束或超时后，SDK 会触发 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 回调得到 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a46f1e9264556d60f0fddb4987bb49e6a"><code>updateTaskTranscoding</code></a> 方法执行的结果。</p>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="String state = streamingController. updateTaskTranscoding (appId,,cname,tid, Transcoding,new CommonCallbackImp ());
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">String state = streamingController. updateTaskTranscoding (appId,,cname,tid, Transcoding,<span class="hljs-keyword">new</span> CommonCallbackImp ());</code></pre>
<blockquote>
<p>注： <code>CommonCallbackImp</code> 继承于 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 类</p>
</blockquote>
<h4 id="更新-cdn-推流地址"><strong>更新 CDN 推流地址</strong></h4>
<p>调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a0da2eb422642b82f3348992f60d60648"><code>replaceTaskUrl</code></a> 方法后，Task 的推流地址会被替换。SDK 会将 Task 以前的 CDN 推流地址 <code>srcUrl</code> 更新为 <code>destUrl</code>。在CDN 推流地址更新结束或超时后，SDK会触发 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 回调得到 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a0da2eb422642b82f3348992f60d60648"><code>replaceTaskUrl</code></a> 方法执行的结果。</p>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="String state = streamingController. replaceTaskUrl (appId,cname,tid,srcUrl,destUrl, new CommonCallbackImp());
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">String state = streamingController. replaceTaskUrl (appId,cname,tid,srcUrl,destUrl, <span class="hljs-keyword">new</span> CommonCallbackImp());</code></pre>
<blockquote>
<p>注： <code>CommonCallbackImp</code> 继承于 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 类</p>
</blockquote>
<h4 id="销毁推流任务"><strong>销毁推流任务</strong></h4>
<p>调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a778a0cbf16d9d05ff8005f64fd7619d9"><code>destroyTask</code></a> 方法后，SDK 会去服务器上销毁 <code>tid</code> 对应的 Task。销毁操作结束或超时后，SDK 会触发 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 回调得到 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a778a0cbf16d9d05ff8005f64fd7619d9"><code>destroyTask</code></a> 方法执行的结果。</p>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="String state = streamingController. destroyTask (appId,cname,tid, new CommonCallbackImp ());
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">String state = streamingController. destroyTask (appId,cname,tid, <span class="hljs-keyword">new</span> CommonCallbackImp ());</code></pre>
<blockquote>
<p>注：<code>CommonCallbackImp</code> 继承于 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 类</p>
</blockquote>
<p>因为以上 API 都是异步执行，所以你需要传递一个回调对象到这些方法中，这个回调对象可以反馈对应方法执行的状态、执行结果和执行错误码。其中，<code>createTask</code>、<code>updateTask</code>、<code>replaceTaskUrl</code>和 <code>destroyTask</code>需要传入继承接口 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_common_callback.html?transId=0.4.0"><code>CommonCallback</code></a> 的工具类，<code>queryTask</code> 需要传入继承接口 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/interfaceio_1_1agora_1_1streaming_1_1_query_callback.html?transId=0.4.0"><code>QueryCallback</code></a> 的工具类。</p>
<h3 id="释放资源" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#释放资源">释放资源<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#释放资源" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h3>
<p>当程序执行结束后，可以调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a1cfa206d30f9d782170f599c7ec88a33"><code>release</code></a> 方法销毁 <code>StreamingController</code> 实例，销毁 SDK。销毁后，你必须重新调用 <a href="https://docs-preview.agoralab.co/cn/Video/API%20Reference/streaming_java/0.4.0/classio_1_1agora_1_1streaming_1_1_streaming_controller.html?transId=0.4.0#a9cf56b90e659de06949bc1a556b4151f"><code>initialize</code> </a> 方法才能再次进行推流。</p>
<pre class="language-java hljs"><div class="tools"><a class="btn theme-toggle-btn" data-clipboard-text="" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Toggle Theme"></a><a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="StreamingController.release();
" data-toggle="tooltip" data-container="body" data-placement="top" title="" data-original-title="Copy Code"></a></div><code class="language-java">StreamingController.release();</code></pre>
<h2 id="日志文件检索" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#日志文件检索">日志文件检索<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#日志文件检索" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h2>
<p>SDK 的日志都是通过系统 API syslog 打印输出，对问题的追查需要通过系统日志。centos 的默认配置是输出到 <code>/var/log/messages</code>。</p>
<h2 id="注意事项" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#注意事项">注意事项<a href="javascript:;" type="button" class="btn copy-btn" data-clipboard-text="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#注意事项" data-toggle="tooltip" data-placement="top" title="" data-original-title="Copy link"></a></h2>
<p>你的 App 不能在回调⽅法内执⾏耗时操作，否则会导致 SDK 的回调线程阻塞，回调队列⾥其他的回调都会阻塞等待。</p>

    </div>
    <div class="article-nextprev clearfix">
      
      <a class="nextprev-btn prev" href="https://docs-preview.agoralab.co/cn/scrs/scrs_sdk_java?platform=Linux%20Java">
        &lt;&nbsp;
        上一篇：
        下载并快速集成 SDK
      </a>
      
      
      <a class="nextprev-btn next" href="https://docs-preview.agoralab.co/cn/scrs/API%20Reference/streaming_java/0.4.0/index.html?transId=0.4.0">
        下一篇：
        Linux Java
        &nbsp;&gt;
      </a>
      
    </div>
  </div>
</div>
<div class="article-menu" style="max-height: 787px;">
  <ul><li class="first-level active"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#api-%E8%B0%83%E7%94%A8%E6%97%B6%E5%BA%8F" title="API 调用时序">API 调用时序</a></li><li class="first-level"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95" title="实现方法">实现方法</a></li><li class="second-level"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B" title="创建实例">创建实例</a></li><li class="second-level"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#%E6%8E%A8%E6%B5%81%E6%93%8D%E4%BD%9C" title="推流操作">推流操作</a></li><li class="second-level"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90" title="释放资源">释放资源</a></li><li class="first-level"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E6%A3%80%E7%B4%A2" title="日志文件检索">日志文件检索</a></li><li class="first-level"><a href="https://docs-preview.agoralab.co/cn/scrs/scrs_api_java?platform=Linux%20Java#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" title="注意事项">注意事项</a></li></ul>
</div>
<div class="article-feedback-popup closed">
  <span class="close">X</span>
  <div class="thumbs">
    <div class="question">
      本篇文章对你是否有帮助？
    </div>
    <div class="thumb-icons">
      <div class="thumb-icon thumbs-up"></div>
      <div class="thumb-icon thumbs-down"></div>
      <div class="thumbs-state hidden">打分成功！</div>
    </div>
  </div>
  <div class="comments">
    <div id="feedback-form">
      <div class="feedback-option form-group hidden">
        <label for="">这篇文档的问题可能包括：</label>
        
        <div>
          <label>
            <input type="checkbox" value="0"> 内容错误
          </label>
        </div>
        
        <div>
          <label>
            <input type="checkbox" value="1"> 更新不及时
          </label>
        </div>
        
        <div>
          <label>
            <input type="checkbox" value="2"> 链接错误
          </label>
        </div>
        
        <div>
          <label>
            <input type="checkbox" value="3"> 内容缺失（缺少代码或其他）
          </label>
        </div>
        
        <div>
          <label>
            <input type="checkbox" value="4"> 太简单/步骤待完善
          </label>
        </div>
        
        <div>
          <label>
            <input type="checkbox" value="5"> 看不懂
          </label>
        </div>
        
      </div>
      <div class="form-group">
        <label for="comment-input">更多建议:</label>
        <textarea id="comment-input" rows="3" class="form-control" placeholder="请详细描述在文档使用中遇到的问题或改进建议..."></textarea>
        <div class="has-error valid-comment-error hidden">请输入您的建议</div>
      </div>
      <div class="form-group">
        <input type="email" id="email-input" class="form-control" placeholder="留下您的email，接收后续反馈">
        <div class="has-error valid-email-error hidden">邮箱格式不正确</div>
      </div>
      <div class="form-group feedback-success hidden">
        <div>我们收到了您的反馈。感谢您的建议。</div>
      </div>
      <div class="text-center">
        <button class="btn btn-primary submit">提交</button>
        <button class="btn btn-default cancel">忽略</button>
      </div>
    </div>
    <div class="comments-footer">
      <h5 class="footer-title">你还可以:</h5>
      <div>
        <a href="https://agora-ticket.agora.io/" target="_blank">
          <i class="icon icon-ticket"></i>
          <span class="icon-text">支持</span>
        </a>
        <a class="right" href="https://docs.agora.io/cn/Agora%20Platform/community" target="_blank">
          <i class="icon icon-forum"></i>
          <span class="icon-text">访问论坛</span>
        </a>
      </div>
    </div>
  </div>
</div>
<div class="float-menu">
  <a class="menu-icon totop-icon hidden" href="javascript:;">
    <i class="icon totop"></i>
  </a>
  <a class="menu-icon feedback-icon" href="javascript:;">
    <i class="icon feedback"></i>
  </a>
</div>
<div id="reveal-modal">
  <div class="reveal-modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
  </div>
  <div class="reveal fade center ready" role="application" data-transition-speed="default" data-background-transition="fade">
    <div class="slides" style="width: 960px; height: 700px; left: 50%; top: 50%; bottom: auto; right: auto; transform: translate(-50%, -50%) scale(0.2);"></div>
  <div class="backgrounds"></div><div class="progress" style="display: block;"><span style="width: 0px;"></span></div><aside class="controls" data-controls-layout="bottom-right" data-controls-back-arrows="faded" style="display: block;"><button class="navigate-left" aria-label="previous slide" disabled="disabled"><div class="controls-arrow"></div></button><button class="navigate-right" aria-label="next slide" disabled="disabled"><div class="controls-arrow"></div></button><button class="navigate-up" aria-label="above slide" disabled="disabled"><div class="controls-arrow"></div></button><button class="navigate-down" aria-label="below slide" disabled="disabled"><div class="controls-arrow"></div></button></aside><div class="slide-number" style="display: none;"></div><div class="speaker-notes" data-prevent-swipe="" tabindex="0"></div><div class="pause-overlay"><button class="resume-button">Resume presentation</button></div><div id="aria-status-div" aria-live="polite" aria-atomic="true" style="position: absolute; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px);"></div></div>
</div>

  </div>
<script src="./调用 API 进行推流_files/0.658d3bfc535e0b13800c.js.下载"></script><script src="./调用 API 进行推流_files/1.cdfce85e6d409b9b752b.js.下载"></script><script src="./调用 API 进行推流_files/docs.a2011adaf2c835ae734c.js.下载"></script></body></html>